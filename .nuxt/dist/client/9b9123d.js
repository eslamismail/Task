(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{411:function(t,e,r){"use strict";r.r(e);var n=r(18),o=(r(67),r(39),{middleware:"user",layout:"app",head:function(){return{title:"Task - cart"}},data:function(){return{total:0}},computed:{cart:function(){this.total=0;for(var t=0;t<this.$store.state.user.cart.length;t++){var e=this.$store.state.user.cart[t],r=(null==e?void 0:e.product).price;this.total+=r*e.quantity}return this.$store.state.user.cart}},created:function(){this.getCart()},methods:{getCart:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,axios.get("cart");case 3:n=e.sent,o=null==n||null===(r=n.data)||void 0===r?void 0:r.user,c=o.carts,t.$store.commit("user/setCart",c),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),e.t0.response?400==e.t0.response.status?t.$notify({group:"foo",text:e.t0.response.data.message,type:"error"}):401==e.t0.response.status?t.$refreshUser():t.$notify({group:"foo",text:e.t0.response.statusText,type:"error"}):t.$notify({group:"foo",text:"No internet access",type:"error"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},isDisabled:function(t){if(1==t)return"disabled"},addItem:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o,data,c,d,f,l,m;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.cart.find((function(e){return e.id==t})),o=n.quantity,o+=1,r.prev=2,data={id:t,quantity:o},r.next=6,axios.put("/cart",data);case 6:c=r.sent,d=null==c?void 0:c.data,f=d.cart,l=d.message,e.$store.commit("user/editCart",f),e.$notify({group:"foo",text:l,type:"success"}),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(2),r.t0.response?400==r.t0.response.status?e.$notify({group:"foo",text:r.t0.response.data.message,type:"error"}):404==r.t0.response.status?(e.$notify({group:"foo",text:r.t0.response.data.message,type:"error"}),m=e.cart.find((function(e){return e.id==t})),e.$store.commit("user/reomveFromCart",m)):401==r.t0.response.status&&e.$refreshUser():e.$notify({group:"foo",text:"No internet access",type:"error"});case 15:case"end":return r.stop()}}),r,null,[[2,12]])})))()},removeItem:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o,data,c,d,f,l,m;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=e.cart.find((function(e){return e.id==t})),1!=(o=n.quantity)){r.next=3;break}return r.abrupt("return",!1);case 3:return o-=1,r.prev=4,data={id:t,quantity:o},r.next=8,axios.put("/cart",data);case 8:c=r.sent,d=null==c?void 0:c.data,f=d.cart,l=d.message,e.$store.commit("user/editCart",f),e.$notify({group:"foo",text:l,type:"success"}),r.next=17;break;case 14:r.prev=14,r.t0=r.catch(4),r.t0.response?400==r.t0.response.status?e.$notify({group:"foo",text:r.t0.response.data.message,type:"error"}):404==r.t0.response.status?(m=e.cart.find((function(e){return e.id==t})),e.$store.commit("user/reomveFromCart",m),e.$notify({group:"foo",text:r.t0.response.data.message,type:"error"})):401==r.t0.response.status&&e.$refreshUser():e.$notify({group:"foo",text:"No internet access",type:"error"});case 17:case"end":return r.stop()}}),r,null,[[4,14]])})))()},deleteItem:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o,c,d,f;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!confirm("are you sure to delete this item ?")){r.next=14;break}return r.prev=2,r.next=5,axios.delete("/cart/".concat(t));case 5:n=r.sent,o=null==n?void 0:n.data,c=o.cart,d=o.message,e.$store.commit("user/reomveFromCart",c),e.$notify({group:"foo",text:d,type:"success"}),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(2),r.t0.response?400==r.t0.response.status?e.$notify({group:"foo",text:r.t0.response.data.message,type:"error"}):404==r.t0.response.status?(f=e.cart.find((function(e){return e.id==t})),e.$store.commit("user/reomveFromCart",f),e.$notify({group:"foo",text:r.t0.response.data.message,type:"error"})):401==r.t0.response.status?e.$refreshUser():e.$notify({group:"foo",text:r.t0.response.data.message,type:"error"}):e.$notify({group:"foo",text:"No internet access",type:"error"});case 14:case"end":return r.stop()}}),r,null,[[2,11]])})))()}}}),c=r(25),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container mt-4"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12 justify-content-center"},[r("h1",{staticClass:"text-center"},[t._v("Total cart amount: "+t._s(t.total)+" LE")])])]),t._v(" "),r("div",{staticClass:"row"},t._l(t.cart,(function(e,n){return r("div",{key:n,staticClass:"col-md-12"},[r("div",{staticClass:"card mb-3"},[r("div",{staticClass:"row g-0 align-items-center"},[r("div",{staticClass:"col-md-4"},[r("img",{attrs:{width:"80%",src:e.product.image,alt:"..."}})]),t._v(" "),r("div",{staticClass:"col-md-8"},[r("div",{staticClass:"card-body"},[r("h5",{staticClass:"card-title"},[t._v(t._s(e.product.name))]),t._v(" "),r("p",{staticClass:"card-text"},[t._v(t._s(e.product.description))]),t._v(" "),r("p",{staticClass:"card-text"},[t._v("Price: "+t._s(e.product.price))]),t._v(" "),r("p",{staticClass:"card-text"},[t._v("Total: "+t._s(e.product.price*e.quantity))]),t._v(" "),r("div",{staticClass:"card-text"},[r("a",{class:"btn btn-danger text-white",attrs:{disabled:!0},on:{click:function(r){return r.preventDefault(),t.deleteItem(e.id)}}},[r("i",{staticClass:"fas fa-trash"})]),t._v(" "),r("a",{class:"btn btn-light "+t.isDisabled(e.quantity),attrs:{disabled:!0},on:{click:function(r){return r.preventDefault(),t.removeItem(e.id)}}},[r("i",{staticClass:"fas fa-minus"})]),t._v(" "),r("span",{staticClass:"btn disabled"},[t._v(t._s(e.quantity))]),t._v(" "),r("a",{staticClass:"btn btn-light",on:{click:function(r){return r.preventDefault(),t.addItem(e.id)}}},[r("i",{staticClass:"fas fa-plus"})])])])])])])])})),0)])}),[],!1,null,null,null);e.default=component.exports}}]);